@model WebUI.Models.StateModel

<div id="main">
    <div id="leftPane">
    </div>

    <div id="rightPane">
    </div>
    
    <div hidden id="rightPaneEditorContents">
        <div id="editorPaneWrapper" style="height: 100%">
            <div id="editorPane" class="cz" data-filepath="{filePath}" style="width:100%;height:100%;border:1px solid grey">

            </div>
        </div>

        <div id="bottomPaneHidden" class="dH">
            <table style="width: 100%">
                <tbody>
                    <tr>
                        <td>
                            File:&nbsp;<a id="filePathLink" class="blueLink" href="/?leftProject={projectId}&file={filePath}" target="_blank" title="Click to open file in a new tab">{filePath}</a>&nbsp;(<a id="fileDownloadLink" class="blueLink" href="/download/{projectId}/?filePath={filePath}" title="Click to download the file">Download</a>)
                        </td>
                        <td style="text-align: right;">
                            <a id="webAccessLink" style="margin-right: 16px;" class="blueLink" href="{weblink}" target="_blank">{repoRelativePath}</a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Project:&nbsp;<a id="projectExplorerLink" class="blueLink" href="/?leftProject={projectId}" onclick="if (event.button === 0) { LoadProjectExplorer('{projectId}'); return false; }">{projectId}</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    var codexWebRootPrefix = @Html.Raw(ViewContext.GetRootPrefix());

    var currentState = {
        leftProjectId: null,
        rightProjectId: null,
        filePath: null,
        leftSymbolId: null,
        rightSymbolId: null,
        lineNumber: null,
        windowTitle: 'Index',
        searchText: null,
        leftPaneContent: null,
        rightPaneContent: null,
    };
    var initialState = {
        leftProjectId: @Html.Raw(Model.leftProjectId),
        rightProjectId: @Html.Raw(Model.rightProjectId),
        filePath: @Html.Raw(Model.filePath),
        leftSymbolId: @Html.Raw(Model.leftSymbolId),
        rightSymbolId: @Html.Raw(Model.rightSymbolId),
        lineNumber: @Html.Raw(Model.lineNumber),
        windowTitle: @Html.Raw(Model.windowTitle),
        searchText: @Html.Raw(Model.searchText),
        leftPaneContent: @Html.Raw(Model.leftPaneContent),
        rightPaneContent: @Html.Raw(Model.rightPaneContent),
    };
    ensureSearchBox();
    DisplayState(initialState);
    ReplaceCurrentState();
    var selectedFile = null;
</script>